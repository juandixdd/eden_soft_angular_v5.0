<div class="content-wrapper container-xxl p-0">
  <div class="content-body">
    <!-- Invoice List -->
    <section class="invoice-list-wrapper">
      <div class="card">
        <!-- Invoice List Header -->
        <div class="row">
          <div class="col-md-6 col-12">
            <div class="d-flex justify-content-between align-items-center m-1">
              <div class="d-flex align-items-center">
                <label class="d-flex align-items-center"
                  >Show
                  <select
                    class="form-control mx-25"
                    [(ngModel)]="selectedOption"
                  >
                    <option value="10">10</option>
                    <option value="25">25</option>
                    <option value="50">50</option>
                    <option value="100">100</option>
                  </select>
                </label>
                <button
                  class="btn btn-primary ml-2"
                  (click)="modalOpenForm(modalForm)"
                  rippleEffect
                >
                  Agregar un cliente
                </button>
              </div>
            </div>
          </div>
        </div>
        <!--/ Invoice List table -->
        <ngx-datatable
          [rows]="rows"
          [rowHeight]="50"
          class="bootstrap core-bootstrap"
          [limit]="selectedOption"
          [columnMode]="ColumnMode.force"
          [headerHeight]="50"
          [footerHeight]="50"
          [scrollbarH]="true"
        >
          <!-- Column -->
          <ngx-datatable-column name="#" prop="id" [width]="10">
            <ng-template let-id="value" ngx-datatable-cell-template>
              <a
                routerLink="/apps/invoice/preview/{{ id }}"
                class="font-weight-bold text-dark"
                >#{{ id }}</a
              >
            </ng-template>
          </ngx-datatable-column>

          <!-- Column -->
          <ngx-datatable-column name="Nombre" prop="name" [width]="100" >
            <ng-template let-id="value" ngx-datatable-cell-template>
              <a
                routerLink="/apps/invoice/preview/{{ name }}"
                class="font-weight-bold text-dark"
                >{{ id | uppercase }}</a
              >
            </ng-template>
          </ngx-datatable-column>

          <!-- Column -->
         <!--  <ngx-datatable-column name="Apellido" prop="last_name" [width]="30">
            <ng-template let-id="value" ngx-datatable-cell-template>
              <p
                routerLink="/apps/invoice/preview/{{ id }}"
                class="font-weight-bold text-dark"
              >
                {{ id }}
              </p>
            </ng-template>
          </ngx-datatable-column> -->

          <!-- Column -->
          <ngx-datatable-column name="Teléfono" prop="telephone" [width]="10">
            <ng-template let-id="value" ngx-datatable-cell-template>
              <p
                routerLink="/apps/invoice/preview/{{ id }}"
                class="font-weight-bold text-dark"
              >
                {{ id }}
              </p>
            </ng-template>
          </ngx-datatable-column>

           <!-- Column -->
           <ngx-datatable-column name="Altura" prop="height" [width]="10">
            <ng-template let-id="value" ngx-datatable-cell-template>
              <p
                routerLink="/apps/invoice/preview/{{ id }}"
                class="font-weight-bold text-dark"
              >
                {{ id }}
              </p>
            </ng-template>
          </ngx-datatable-column>

          <!-- Column -->
          <ngx-datatable-column name="Peso" prop="weight" [width]="10">
            <ng-template let-id="value" ngx-datatable-cell-template>
              <p
                routerLink="/apps/invoice/preview/{{ id }}"
                class="font-weight-bold text-dark"
              >
                {{ id }}
              </p>
            </ng-template>
          </ngx-datatable-column>

          <!-- Column -->
          <ngx-datatable-column name="Objetivo" prop="goal" [width]="100">
            <ng-template let-id="value" ngx-datatable-cell-template>
              <p
                routerLink="/apps/invoice/preview/{{ id }}"
                class="font-weight-bold text-dark"
              >
                {{ id }}
              </p>
            </ng-template>
          </ngx-datatable-column>

          <!-- Column -->
          <ngx-datatable-column name="Membresía" prop="membershipsRecord.memberships.name" [width]="10">
            <ng-template let-id="value" ngx-datatable-cell-template>
              <p
                routerLink="/apps/invoice/preview/{{ id }}"
                class="font-weight-bold text-dark"
              >
                {{ id }}
              </p>
            </ng-template>
          </ngx-datatable-column>

          <!-- Column -->
          <ngx-datatable-column name="F. Inicio" prop="start_date" [width]="10">
            <ng-template let-id="value" ngx-datatable-cell-template>
              <p
                routerLink="/apps/invoice/preview/{{ id }}"
                class="font-weight-bold text-dark"
              >
                {{ id }}
              </p>
            </ng-template>
          </ngx-datatable-column>


          <!-- Accions with icons -->
          <ngx-datatable-column name="Acciones" [width]="100">
            <ng-template ngx-datatable-cell-template let-row="row">
              <div class="d-flex justify-content-start">
                <button
                  class="btn btn-icon btn-sm mr-1"
                  (click)="modalOpenEdit(modalEdit); getMembership(row)"
                >
                  <i class="feather icon-edit"></i>
                </button>
                <button
                  class="btn btn-icon btn-sm"
                  (click)="confirmDeleteClient(row.id); getMembershipById(row.id)"
                >
                  <i class="feather icon-trash"></i>
                </button>
              </div>
            </ng-template>
          </ngx-datatable-column>
        </ngx-datatable>
      </div>
    </section>
  </div>
</div>


<!-- *************************************************** MODAL *************************************************** -->



<!-- Login Form -->
<div class="login-form">
<!-- Modal -->
<ng-template #modalForm let-modal>
<div class="modal-header">
  <h4 class="modal-title" id="myModalLabel1">Agregar</h4>
  <button
    type="button"
    class="close"
    (click)="modal.dismiss('Cross click')"
    aria-label="Close"
  >
    <span aria-hidden="true">&times;</span>
  </button>
</div>
<div class="modal-body" tabindex="0" ngbAutofocus>
  <form [formGroup]="clientForm">

    <!-- input -->
    <label>Nombre </label>
    <div class="form-group">
      <input
        formControlName="name"
        type="text"
        placeholder="Nombre"
        class="form-control"
      />
      <span *ngIf="validField('name')" class="error">
        El nombre es requerido
      </span>
    </div>

    <!-- input -->
    <label>Apellido </label>
    <div class="form-group">
      <input
        formControlName="last_name"
        type="text"
        placeholder="Apellido"
        class="form-control"
      />
      <span *ngIf="validField('last_name')" class="error">
        El apellido es requerido
      </span>
    </div>

    <!-- input -->
    <label>Teléfono </label>
    <div class="form-group">
      <input
        formControlName="telephone"
        type="number"
        placeholder="Teléfono"
        class="form-control"
      />
      <span *ngIf="validField('telephone')" class="error">
        El teléfono es requerido
      </span>
    </div>

    <!-- input -->
    <label>Altura </label>
    <div class="form-group">
      <input
        formControlName="height"
        type="number"
        placeholder="Altura"
        class="form-control"
      />
      <span *ngIf="validField('height')" class="error">
        La altura es requerida
      </span>
    </div>

    <!-- input -->
    <label>Peso </label>
    <div class="form-group">
      <input
        formControlName="weight"
        type="number"
        placeholder="Peso"
        class="form-control"
      />
      <span *ngIf="validField('weight')" class="error">
        El peso es requerido
      </span>
    </div>

    <!-- input -->
    <label>Objetivo </label>
    <div class="form-group">
      <input
        formControlName="goal"
        type="text"
        placeholder="Objetivo"
        class="form-control"
      />
      <span *ngIf="validField('goal')" class="error">
        El objetivo es requerido
      </span>
    </div>

    
      <label>Selecionar membresia</label>
      <div class="form-group">
        <!-- Basic Multi select -->
        <ng-select
          [items]="selectMulti | async"
          [closeOnSelect]="false"
          [searchable]="false"
          (change)="selectEvent($event)"
          bindLabel="name"
          placeholder="Seleccionar membresía"
          [ngModelOptions]="{
            standalone: true
          }"
          [ngModel]="selectMultiSelected | async"
        >

          <ng-template ng-label-tmp let-item="item" let-clear="clear">
            <span class="ng-value-label"> {{ item.name }}</span>
            <span class="ng-value-icon right" (click)="clear(item)" aria-hidden="true">×</span>
          </ng-template>
        </ng-select>
      </div>
    

    <!-- input -->
    <label>Fecha de inicio </label>
    <div class="form-group">
      <input
        formControlName="start_date"
        type="date"
        placeholder="Fecha de inicio"
        class="form-control"
      />
      <span *ngIf="validField('start_date')" class="error">
        La fecha de inicio es requerida
      </span>
    </div>

    

  </form>
</div>
<div class="modal-footer">
  <button
    type="button"
    class="btn btn-primary"
    (click)="saveNewClient() || modal.close()"
    [disabled]="!clientForm.valid"
    rippleEffect
  >
    Agregar
  </button>
</div>
</ng-template>
<!-- / Modal -->
</div>



<!--? ----------------------- Modal edit ----------------------------->
<!-- Login Form -->
<div class="login-form">
  <!-- Modal -->
  <ng-template #modalEdit let-modal>
  <div class="modal-header">
    <h4 class="modal-title" id="myModalLabel1">Actualizar</h4>
    <button
      type="button"
      class="close"
      (click)="modal.dismiss('Cross click')"
      aria-label="Close"
    >
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body" tabindex="0" ngbAutofocus>
    <form [formGroup]="editForm">
  
      <!-- input -->
      <label>Nombre </label>
      <div class="form-group">
        <input
          formControlName="name"
          type="text"
          placeholder="Nombre"
          class="form-control"
        />
        <span *ngIf="editValidField('name')" class="error">
          El nombre es requerido
        </span>
      </div>
  
      <!-- input -->
      <label>Apellido </label>
      <div class="form-group">
        <input
          formControlName="last_name"
          type="text"
          placeholder="Apellido"
          class="form-control"
        />
        <span *ngIf="editValidField('last_name')" class="error">
          El apellido es requerido
        </span>
      </div>
  
      <!-- input -->
      <label>Teléfono </label>
      <div class="form-group">
        <input
          formControlName="telephone"
          type="number"
          placeholder="Teléfono"
          class="form-control"
        />
        <span *ngIf="editValidField('telephone')" class="error">
          El teléfono es requerido
        </span>
      </div>
  
      <!-- input -->
      <label>Altura </label>
      <div class="form-group">
        <input
          formControlName="height"
          type="number"
          placeholder="Altura"
          class="form-control"
        />
        <span *ngIf="editValidField('height')" class="error">
          La altura es requerida
        </span>
      </div>
  
      <!-- input -->
      <label>Peso </label>
      <div class="form-group">
        <input
          formControlName="weight"
          type="number"
          placeholder="Peso"
          class="form-control"
        />
        <span *ngIf="editValidField('weight')" class="error">
          El peso es requerido
        </span>
      </div>
  
      <!-- input -->
      <label>Objetivo </label>
      <div class="form-group">
        <input
          formControlName="goal"
          type="text"
          placeholder="Objetivo"
          class="form-control"
        />
        <span *ngIf="editValidField('goal')" class="error">
          El objetivo es requerido
        </span>
      </div>
  
      <!-- input -->
      <label>Fecha de inicio </label>
      <div class="form-group">
        <input
          formControlName="start_date"
          type="date"
          placeholder="Fecha de inicio"
          class="form-control"
        />
        <span *ngIf="editValidField('start_date')" class="error">
          La fecha de inicio es requerida
        </span>
      </div>

      
  
      
  
    </form>
  </div>
  <div class="modal-footer">
    <button
      type="button"
      class="btn btn-primary"
      (click)="updateClient()"
      [disabled]="!editForm.valid"
      rippleEffect
    >
      Actualizar
    </button>
  </div>
  </ng-template>
  <!-- / Modal -->
  </div>